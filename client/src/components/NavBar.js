import React, {useState, useEffect} from 'react';
import './../style/navbar.css';
import { Link, useHistory } from "react-router-dom";
import { useSpring, animated } from 'react-spring'
import { getProfile } from './queries';
import { useQuery } from '@apollo/client';

function NavBar() {

    const [state, setState] = React.useState({
        checkedA: true,
        checkedB: true,
    });

    const [update, setUpdate] = useState(false);

    const handleChange = (event) => {
        setState({ ...state, [event.target.name]: event.target.checked });
    };

    const userId = localStorage.getItem("personId")
    const { loading, error, data } = useQuery(getProfile, {
        variables: { id: userId }
    });

    useEffect(
        () => {
        }, [update]
    );

    const props = useSpring({ to: { opacity: 1 }, from: { opacity: 0 } })

    const history = useHistory();
    const routeChange = () => {
        history.push("/login")
    }

    return (
        <animated.div className="navbar" style={props}>
            <div>
                {/*<li><Link to="/"><svg className="navbar-logo" viewBox="0 10 152 43" preserveAspectRatio="xMidYMid" width="152" height="53" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M28.752 41.56c0 2.16-.384 3.864-1.152 5.112-.768 1.2-1.896 2.328-3.384 3.384-.384.24-.912.528-1.584.864-.672.336-1.416.648-2.232.936-.816.288-1.68.528-2.592.72-.912.192-1.752.288-2.52.288-2.16 0-3.792-.24-4.896-.72-1.104-.432-1.656-.96-1.656-1.584 0-.672.192-1.224.576-1.656.384-.432.72-.672 1.008-.72l.792.576c.24.24.576.504 1.008.792.432.24 1.128.36 2.088.36.912 0 2.016-.144 3.312-.432 1.296-.336 2.52-.816 3.672-1.44 1.2-.672 2.208-1.488 3.024-2.448.864-.96 1.296-2.064 1.296-3.312 0-1.104-.84-2.112-2.52-3.024-1.632-.96-4.224-1.608-7.776-1.944-1.824-.144-3.624-.36-5.4-.648-1.776-.336-3.384-.768-4.824-1.296-1.392-.576-2.52-1.272-3.384-2.088-.864-.864-1.296-1.92-1.296-3.168 0-1.2.336-2.352 1.008-3.456.672-1.104 1.488-2.112 2.448-3.024 1.008-.96 2.04-1.8 3.096-2.52s1.944-1.32 2.664-1.8c.576-.336 1.368-.768 2.376-1.296 1.056-.576 2.16-1.104 3.312-1.584 1.2-.528 2.376-.96 3.528-1.296 1.2-.384 2.208-.576 3.024-.576.96 0 1.608.264 1.944.792.336.528.504 1.272.504 2.232 0 .816-.096 1.68-.288 2.592-.192.912-.408 1.8-.648 2.664-.24.864-.48 1.632-.72 2.304-.192.624-.336 1.032-.432 1.224-.192.432-.408.72-.648.864-.24.144-.408.216-.504.216-.192 0-.288-.12-.288-.36 0-.144.024-.408.072-.792.096-.432.192-.936.288-1.512.144-.576.24-1.2.288-1.872.096-.672.144-1.344.144-2.016 0-1.056-.048-1.824-.144-2.304-.096-.48-.48-.72-1.152-.72-.672 0-1.584.192-2.736.576-1.152.336-2.328.768-3.528 1.296-1.296.576-2.568 1.32-3.816 2.232-1.2.912-2.28 1.848-3.24 2.808-.96.96-1.752 1.896-2.376 2.808-.576.864-.864 1.56-.864 2.088 0 .576.384 1.128 1.152 1.656.816.48 1.824.912 3.024 1.296 1.248.384 2.616.72 4.104 1.008 1.488.288 2.952.504 4.392.648 1.2.144 2.52.336 3.96.576 1.44.24 2.784.624 4.032 1.152 1.248.528 2.304 1.248 3.168 2.16.864.864 1.296 1.992 1.296 3.384zm24.6999-2.664c0 .48-.072.984-.216 1.512-.144.48-.288.888-.432 1.224-.096.144-.552.648-1.368 1.512-.768.816-1.752 1.68-2.952 2.592-1.152.912-2.472 1.752-3.96 2.52-1.44.72-2.832 1.08-4.176 1.08-.816 0-1.656-.144-2.52-.432-.816-.288-1.584-.744-2.304-1.368-.72-.672-1.32-1.488-1.8-2.448-.432-.96-.648-2.136-.648-3.528 0-2.304.384-4.392 1.152-6.264.768-1.872 1.536-3.36 2.304-4.464.336-.528.768-1.056 1.296-1.584.576-.576 1.128-1.08 1.656-1.512.528-.48 1.008-.864 1.44-1.152.48-.288.816-.432 1.008-.432.432 0 .816.12 1.152.36.384.24.576.48.576.72 0 .384-.12.72-.36 1.008-.192.24-.48.528-.864.864-.384.288-.84.696-1.368 1.224-.528.48-1.08 1.128-1.656 1.944-1.152 1.584-2.016 3.216-2.592 4.896-.528 1.632-.792 3.072-.792 4.32 0 1.248.456 2.256 1.368 3.024.96.72 1.944 1.08 2.952 1.08 1.824 0 3.432-.408 4.824-1.224 1.44-.816 2.664-1.728 3.672-2.736 1.008-1.008 1.824-1.92 2.448-2.736.624-.816 1.08-1.224 1.368-1.224.528 0 .792.408.792 1.224zm22.7639-8.856c0 .336-.144.624-.432.864-.288.192-.624.36-1.008.504-.384.144-.768.264-1.152.36-.384.048-.696.072-.936.072-.72 0-1.2-.048-1.44-.144-.24-.096-.432-.144-.576-.144-1.2 0-2.16.096-2.88.288-.72.192-1.296.504-1.728.936-.384.432-.648.984-.792 1.656-.096.624-.144 1.392-.144 2.304 0 1.536.048 2.76.144 3.672.144.912.264 1.656.36 2.232.144.576.264 1.032.36 1.368.144.288.216.576.216.864 0 .384-.216.792-.648 1.224-.384.432-.744.648-1.08.648-.576 0-1.104-.504-1.584-1.512-.432-1.056-.816-2.28-1.152-3.672-.288-1.44-.528-2.856-.72-4.248-.192-1.392-.288-2.448-.288-3.168 0-.816.072-1.584.216-2.304.144-.768.336-1.416.576-1.944.24-.576.504-1.032.792-1.368.288-.336.576-.504.864-.504.24 0 .432.096.576.288.144.144.264.336.36.576l.288.576c.144.144.312.216.504.216.432 0 1.128-.216 2.088-.648.96-.432 2.136-.648 3.528-.648 1.296 0 2.256.048 2.88.144.672.048 1.32.192 1.9439.432.1441.048.3121.168.5041.36.24.144.36.384.36.72zM86.253 18.88c0 .096-.168.288-.504.576-.336.288-.744.6-1.224.936-.432.288-.888.552-1.368.792-.48.24-.864.36-1.152.36h-.792c-.288-.048-.6-.144-.936-.288-.288-.144-.552-.336-.792-.576-.24-.288-.36-.648-.36-1.08 0-.672.24-1.296.72-1.872.48-.624 1.104-.936 1.872-.936.144 0 .456.072.936.216.528.096 1.056.24 1.584.432s.984.408 1.368.648c.432.24.648.504.648.792zm2.376 26.928c0 .336-.264.624-.792.864-.48.24-.84.36-1.08.36-.48 0-.912-.312-1.296-.936-.384-.624-.72-1.344-1.008-2.16-.288-.816-.528-1.584-.72-2.304-.192-.768-.336-1.296-.432-1.584-.144-.48-.336-1.056-.576-1.728-.24-.672-.48-1.32-.72-1.944-.192-.624-.36-1.176-.504-1.656-.144-.48-.216-.744-.216-.792 0-.672.12-1.296.36-1.872.288-.576.624-.864 1.008-.864.432 0 .888.336 1.368 1.008.48.672.936 1.536 1.368 2.592.48 1.008.912 2.136 1.296 3.384.384 1.2.72 2.352 1.008 3.456.288 1.056.504 1.992.648 2.808.192.768.288 1.224.288 1.368zm21.692-8.136c0 2.16-.264 4.056-.792 5.688-.48 1.632-1.08 3-1.8 4.104-.72 1.056-1.464 1.848-2.232 2.376-.72.528-1.32.792-1.8.792-.672 0-1.32-.288-1.944-.864-.624-.624-.936-1.2-.936-1.728 0-.768.312-1.152.936-1.152.24 0 .48.096.72.288.24.144.456.264.648.36.816-.672 1.584-1.776 2.304-3.312.768-1.536 1.152-3.72 1.152-6.552 0-1.152-.12-2.184-.36-3.096-.24-.912-.528-1.68-.864-2.304-.288-.624-.6-1.104-.936-1.44-.336-.336-.576-.504-.72-.504-.48 0-.96.48-1.44 1.44-.432.96-.816 2.064-1.152 3.312-.336 1.2-.624 2.4-.864 3.6-.192 1.152-.2883 1.944-.2883 2.376.0483.288.0963.552.1443.792l.144.72c.048.24.072.48.072.72 0 .912-.312 1.728-.9363 2.448-.624.72-1.224 1.08-1.8 1.08-.288 0-.528-.192-.72-.576-.144-.432-.264-.96-.36-1.584-.096-.624-.192-1.272-.288-1.944-.048-.672-.12-1.272-.216-1.8-.384-.864-.888-2.232-1.512-4.104-.624-1.872-1.296-3.864-2.016-5.976-.672-2.16-1.32-4.248-1.944-6.264-.576-2.016-1.008-3.624-1.296-4.824-.672-2.592-1.176-4.848-1.512-6.768-.384-1.968-.672-3.672-.864-5.112-.24-1.488-.384-2.76-.432-3.816-.048-1.056-.072-1.944-.072-2.664 0-.432001.192-.768001.576-1.008001.336-.240002.648-.3600035.936-.3600035.432 0 .744.0960005.936.2880005.192.144001.336.480001.432 1.008004.048.528.12 1.296.216 2.304.048 1.008.168 2.352.36 4.032.096.816.264 1.944.504 3.384.288 1.44.648 3.048 1.08 4.824.432 1.776.888 3.648 1.368 5.616.528 1.92 1.056 3.768 1.584 5.544.576 1.776 1.128 3.408 1.656 4.896.576 1.488 1.104 2.664 1.584 3.528.432-1.728.96-3.288 1.584-4.68.528-1.152 1.1763-2.208 1.9443-3.168.768-1.008 1.704-1.512 2.808-1.512.432 0 1.008.192 1.728.576.72.384 1.416 1.032 2.088 1.944.72.912 1.32 2.112 1.8 3.6.528 1.488.792 3.312.792 5.472zm40.9-.648c0 .864-.408 1.944-1.224 3.24-.768 1.248-1.824 2.472-3.168 3.672-1.344 1.2-2.904 2.232-4.68 3.096-1.776.816-3.624 1.224-5.544 1.224-.864 0-1.776-.144-2.736-.432-.96-.288-1.896-.696-2.808-1.224-.912-.576-1.728-1.248-2.448-2.016-.72-.816-1.248-1.728-1.584-2.736-.288.288-.648.768-1.08 1.44-.384.672-.816 1.368-1.296 2.088-.48.672-1.008 1.272-1.584 1.8-.576.48-1.176.72-1.8.72-.624 0-1.152-.312-1.584-.936-.384-.672-.696-1.392-.936-2.16-.24-.816-.408-1.584-.504-2.304-.096-.72-.144-1.128-.144-1.224 0-.576.168-1.656.504-3.24.336-1.632.84-3.312 1.512-5.04.672-1.728 1.512-3.264 2.52-4.608 1.056-1.344 2.28-2.016 3.672-2.016.528 0 .864.24 1.008.72.192.432.288.864.288 1.296v2.16c.24.192.48.336.72.432.288.048.528.144.72.288.24.096.408.264.504.504.144.24.216.624.216 1.152 0 .336-.024.648-.072.936-.048.24-.072.48-.072.72 0 1.248.096 2.472.288 3.672.192 1.2.576 2.28 1.152 3.24.576.912 1.368 1.68 2.376 2.304 1.008.576 2.352.864 4.032.864 2.112 0 3.888-.432 5.328-1.296 1.488-.912 2.712-1.896 3.672-2.952 1.008-1.104 1.8-2.088 2.376-2.952.576-.912 1.056-1.368 1.44-1.368.624 0 .936.312.936.936zm-25.272-3.168c0-.192-.048-.36-.144-.504-.096-.192-.144-.36-.144-.504 0-.192.048-.36.144-.504.096-.144.144-.336.144-.576 0-.144-.048-.24-.144-.288-.096-.096-.144-.192-.144-.288-.432.096-.888.504-1.368 1.224-.432.72-.864 1.56-1.296 2.52-.384.96-.696 1.944-.936 2.952-.24.96-.36 1.752-.36 2.376 0 .336.096.888.288 1.656.192.768.408 1.272.648 1.512.816-1.68 1.56-3.312 2.232-4.896.72-1.584 1.08-3.144 1.08-4.68z" fill="#000"/>
                </svg></Link></li>*/}
                <li><Link to="/">ToDo's</Link></li>
                <li><Link to="/network">Network</Link></li>
            </div>
            <div className="right">
                {localStorage.getItem('token') && <li><a onClick={() => {
                    localStorage.setItem('admin', false);
                    localStorage.removeItem('token');
                    setUpdate(true);
                    routeChange();
                }}>Log out</a></li>}
                {!localStorage.getItem('token') && <li><Link to="/login">Login</Link></li>}
                {!localStorage.getItem('token') && <li><Link to="/signup">Create user</Link></li>}
                {data && localStorage.getItem('token') && <li><Link to={"/profile/" + userId}>{data.profile.fname}</Link></li>}
            </div>
        </animated.div>
    )
}

export default NavBar;